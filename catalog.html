<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Product Catalog - ElectraEdge</title>
    <link rel="stylesheet" href="website.css" />
    <script src="js/session_manager.js"></script>
    <style>
        /* --- your CSS unchanged --- */
        /* ... */
    </style>
</head>

<body>
    <!-- Header -->
    <div id="header-placeholder"></div>

    <script src="js/header.js"></script>

    <section class="container" style="padding: 4rem 0;">
        <h2 style="text-align: center; margin-bottom: 3rem; font-size: 2.5rem; color: #333;">All Products</h2>

        <!-- Search and Sort Controls -->
        <div class="search-sort-container">
            <input type="text" id="searchInput" placeholder="Search products..." style="flex: 1; max-width: 300px;" />
            <select id="sortSelect" style="min-width: 200px;">
                <option value="">Sort by</option>
                <option value="asc">Price: Low to High</option>
                <option value="desc">Price: High to Low</option>
                <option value="name">Name: A to Z</option>
                <option value="stock">Stock: High to Low</option>
            </select>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="loading-state">
            <div class="loading-spinner"></div>
            <p>Loading products...</p>
        </div>

        <!-- Products Grid -->
        <div class="product-grid" id="productCatalog" style="display: none;">
            <!-- Products will be loaded here -->
        </div>

        <!-- Error State -->
        <div id="error-state" class="error-state" style="display: none;">
            <div style="font-size: 3rem; margin-bottom: 1rem; color: #dc3545;">‚ö†Ô∏è</div>
            <h3 style="color: #dc3545; margin-bottom: 1rem;">Unable to Load Products</h3>
            <p style="margin-bottom: 2rem;">We're having trouble loading our products. Please try again later.</p>
            <button onclick="loadProducts()"
                style="background: #2c5aa0; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                Try Again
            </button>
        </div>

        <!-- No Products State -->
        <div id="no-products-state" class="error-state" style="display: none;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
            <h3 style="color: #666; margin-bottom: 1rem;">No Products Found</h3>
            <p style="margin-bottom: 2rem;">No products match your current search or filter criteria.</p>
            <button onclick="clearFilters()"
                style="background: #2c5aa0; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                Clear Filters
            </button>
        </div>
    </section>

    <!-- Catalog/Product logic -->
    <script src="js/catalog.js"></script>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script>
        fetch("footer.html")
            .then(res => res.text())
            .then(data => {
                // SECURITY FIX: Use DOMParser to safely parse HTML and prevent XSS
                const parser = new DOMParser();
                const doc = parser.parseFromString(data, 'text/html');
                const footerContent = doc.body;

                const footerPlaceholder = document.getElementById("footer-placeholder");
                // Clear existing content
                footerPlaceholder.innerHTML = '';
                // Safely append parsed content
                while (footerContent.firstChild) {
                    footerPlaceholder.appendChild(footerContent.firstChild);
                }
            })
            .catch(error => {
                console.error('Error loading footer:', error);
                document.getElementById("footer-placeholder").textContent = 'Footer could not be loaded';
            });
    </script>

</body>
</html>
